(()=>{const e=document.getElementById("projects"),t=document.getElementById("todayDate"),n=document.getElementById("openedProject"),o=document.getElementById("projectForm"),s=document.getElementById("newTaskInput"),i=document.getElementById("todos"),c=(document.getElementById("todo-management"),document.getElementById("close-todo-modal")),d=document.getElementById("overlay"),a=document.getElementById("todoModal"),l=document.getElementById("todoForm"),r=document.querySelector("#taskName"),m=document.querySelector("#dueDate"),u=document.querySelector("#info"),p=document.querySelector("#priority");let v,E,g=JSON.parse(localStorage.getItem("storage"))||[],f=!1;c.addEventListener("click",(()=>{h(a)})),t.innerText="Today's Date: "+(new Date).toString().slice(0,15);const y=(e,t,o)=>{v=e,n.innerText=e,x(i);const s=w(t,v);s.toDos.forEach((e=>function(e,t,n,o,s,i){const c=document.createElement("div");c.classList="container";const d=document.createElement("div");d.classList="infoCont",d.addEventListener("click",(()=>{alert(s)}));const l=document.createElement("div");l.classList="settings";const v=document.createElement("div");v.classList="todo Name",v.innerText=t;const g=document.createElement("h4");g.classList="todo dueDate",g.innerText=n;const y=document.createElement("h4");y.classList="todo priority",y.innerText=o,d.append(g,y,v);const h=document.createElement("button");h.innerText="Edit",h.addEventListener("click",(()=>{((e,t,n,o,s)=>{L(e),f=!0,E=t,r.value=t,m.value=n,u.value=o,p.value=s})(a,t,n,s,o)})),l.appendChild(h),T(l,c,t,i.toDos),c.append(d,l),e.append(c)}(i,e.name,e.dueDate,e.priority,e.description,s))),(()=>{const e=document.createElement("button");e.innerText="+ Add new item",e.id="newTodoBtn",e.addEventListener("click",(()=>{L(a)})),i.append(e)})()},L=e=>{null!==e&&(e.classList.add("active"),d.classList.add("active"))},h=e=>{null!==e&&(l.reset(),e.classList.remove("active"),d.classList.remove("active"))},I=(e,t)=>{const n=e.findIndex((e=>e.name===t));if(n<0)return console.log("Problem - this is project does not exist in list");e.splice(n,1)},x=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},T=function(e,t,o,s){const c=document.createElement("button");c.classList="setting del",c.innerText="Del",c.addEventListener("click",(()=>{if(I(s,o),t.remove(),v===o){for(;i.firstChild;)i.removeChild(i.firstChild);n.innerText="Click on project to see task"}})),e.append(c)},D=(e,t)=>{const n=document.createElement("div");n.classList="container";const o=document.createElement("div");o.classList="settings";const i=document.createElement("div");i.classList="itemName",i.innerText=t,i.addEventListener("click",(()=>{y(t,g)})),s.value="",T(o,n,t,g),n.append(i,o),e.append(n)},k=t=>{if(g.some((e=>e.name===t)))return void console.log("this project name already exists. Please choose new name");const n=function(e){const t=[];return{name:e,addTodo:e=>{t.push(e)},removeTodo:function(e){const n=t.findIndex((t=>t.name===e));n<0&&console.log("Problem - this is project does not exist in todo list"),t.splice(n,1)},toDos:t}}(t);g.push(n),localStorage.setItem("storage",JSON.stringify(g)),x(e),g.forEach((t=>D(e,t.name)))},w=(e,t)=>{const n=e.findIndex((e=>e.name===t));return n<0?console.log("Problem - this is project does not exist in"):e[n]},B=(e,t,n,o,s,i)=>{const c={name:e,dueDate:t,priority:o,description:n};((e,t)=>{if(e.findIndex((e=>e.name===t.name))>-1)return console.log("Problem - this is task name already exist. please try again");e.push(t)})(w(s,i).toDos,c),localStorage.setItem("storage",JSON.stringify(s)),y(i,s),h(a)};o.addEventListener("submit",(function(e){e.preventDefault(),k(s.value)})),l.addEventListener("submit",(function(e){e.preventDefault(),f&&I(w(g,v).toDos,E);const t=p.options[p.selectedIndex];B(r.value,m.value,u.value,t.value,g,v),f=!1})),g?(g.forEach((t=>D(e,t.name))),v=g[0]):e.innerText="No Projects Yet",k("clean House"),B("Dishes","2022-01-01","Mister will do it","High",g,g[0].name),B("kaka","2022-02-01","Mister will NOT do it","Low",g,g[0].name),k("Paint"),B("cracks","2022-09-01","I will do it","High",g,g[1].name),B("side wall","2022-03-01","I will DEFINITELY do it","Low",g,g[1].name)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxRQUFRQyxJQUFJLCtEQUMxQ0wsRUFBS3NCLEtBQUs1RCxJQXVFVm9FLENBRHVCakUsRUFBY2pCLEVBQWFGLEdBQ3pCb0IsTUFBTytELEdBQ2hDOUUsYUFBYTBFLFFBQVEsVUFBVzVFLEtBQUs2RSxVQUFVOUUsSUFDL0NZLEVBQVNkLEVBQWdCRSxHQUN6Qk8sRUFBV2hCLElBV2ZMLEVBQVlvQixpQkFBaUIsVUE5QkosU0FBUzZFLEdBQzlCQSxFQUFFQyxpQkFDRmpCLEVBQWlCaEYsRUFBZ0JvRCxVQTZCckMvQyxFQUFTYyxpQkFBaUIsVUFWSixTQUFTNkUsR0FDM0JBLEVBQUVDLGlCQUNFL0UsR0FDQThDLEVBQWVsQyxFQUFjakIsRUFBYUYsR0FBZ0JvQixNQUFPbkIsR0FFckUsTUFBTWlGLEVBQWlCbkYsRUFBZXdGLFFBQVF4RixFQUFleUYsZUFDN0RQLEVBQVd0RixFQUFZOEMsTUFBTzVDLEVBQVk0QyxNQUFPM0MsRUFBWTJDLE1BQU95QyxFQUFlekMsTUFBT3ZDLEVBQWFGLEdBQ3ZHTyxHQUFXLEtBS1hMLEdBQ0FBLEVBQVltQixTQUFRTyxHQUFXc0MsRUFBaUJuRixFQUFVNkMsRUFBUWtCLFFBQ2xFOUMsRUFBaUJFLEVBQVksSUFFNUJuQixFQUFTMkIsVUFBWSxrQkFFMUIyRCxFQUFpQixlQUNqQlksRUFBVyxTQUFVLGFBQWMsb0JBQXFCLE9BQVEvRSxFQUFhQSxFQUFZLEdBQUc0QyxNQUM1Rm1DLEVBQVcsT0FBUSxhQUFjLHdCQUF5QixNQUFPL0UsRUFBYUEsRUFBWSxHQUFHNEMsTUFDN0Z1QixFQUFpQixTQUNqQlksRUFBVyxTQUFVLGFBQWMsZUFBZ0IsT0FBUS9FLEVBQWFBLEVBQVksR0FBRzRDLE1BQ3ZGbUMsRUFBVyxZQUFhLGFBQWMsMEJBQTJCLE1BQU8vRSxFQUFhQSxFQUFZLEdBQUc0QyxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBmb3JtYXQsIGNvbXBhcmVBc2MgfSBmcm9tICdkYXRlLWZucydcbmNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzJyk7XG5jb25zdCB0b2RheURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kYXlEYXRlJylcbmNvbnN0IG9wZW5lZFByb2plY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlbmVkUHJvamVjdCcpO1xuY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdEZvcm0nKVxuY29uc3QgbmV3UHJvamVjdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld1Rhc2tJbnB1dCcpXG5jb25zdCB0b2RvTWFuYWdlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvcycpXG5jb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLW1hbmFnZW1lbnQnKVxuY29uc3QgY2xvc2VUb2RvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtdG9kby1tb2RhbCcpXG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKVxuY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kb01vZGFsJylcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9Gb3JtJylcbmNvbnN0IG5ld1Rhc2tOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2tOYW1lJylcbmNvbnN0IG5ld1Rhc2tEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZURhdGUnKVxuY29uc3QgbmV3VGFza0luZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5mbycpXG5jb25zdCBzZWxlY3RQcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuXG5sZXQgY3VycmVudFByb2plY3QgXG5sZXQgY3VycmVudFRhc2tcbmxldCBteVN0b3JhZ2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdG9yYWdlJykpO1xubGV0IHByb2plY3RMaXN0ID0gbXlTdG9yYWdlIHx8IFtdO1xubGV0IGVkaXRUYXNrID0gZmFsc2VcblxuY2xvc2VUb2RvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY2xvc2VNb2RhbChtb2RhbClcbn0pXG5cbnRvZGF5RGF0ZS5pbm5lclRleHQgPSAnVG9kYXlcXCdzIERhdGU6ICcgKyBuZXcgRGF0ZSgpLnRvU3RyaW5nKCkuc2xpY2UoMCwxNSlcblxuY29uc3QgY3JlYXRlQWRkVG9kb0J0biA9ICgpID0+IHtcbiAgICBjb25zdCBuZXdUb2RvQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbmV3VG9kb0J0bi5pbm5lclRleHQgPSBcIisgQWRkIG5ldyBpdGVtXCI7XG4gICAgbmV3VG9kb0J0bi5pZCA9ICduZXdUb2RvQnRuJ1xuICAgIG5ld1RvZG9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIG9wZW5Nb2RhbChtb2RhbClcbiAgICB9KVxuICAgIHRvZG9NYW5hZ2VtZW50LmFwcGVuZChuZXdUb2RvQnRuKVxufVxuXG5jb25zdCByZW5kZXJUYXNrID0gZnVuY3Rpb24ocGFyZW50LCB0YXNrTmFtZSwgZGF0ZSwgcHJpb3JpdHksIGRlc2NyaXB0aW9uLCBwcm9qZWN0KSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdCA9IFwiY29udGFpbmVyXCI7XG4gICAgY29uc3QgaW5mb0NvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpbmZvQ29udC5jbGFzc0xpc3QgPSAnaW5mb0NvbnQnXG4gICAgaW5mb0NvbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGFsZXJ0KGRlc2NyaXB0aW9uKVxuICAgIH0pXG4gICAgXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzZXR0aW5ncy5jbGFzc0xpc3QgPSAnc2V0dGluZ3MnXG4gICAgY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0b2RvTmFtZS5jbGFzc0xpc3QgPSAndG9kbyBOYW1lJztcbiAgICB0b2RvTmFtZS5pbm5lclRleHQgPSB0YXNrTmFtZTtcbiAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgICBkdWVEYXRlLmNsYXNzTGlzdCA9ICd0b2RvIGR1ZURhdGUnO1xuICAgIGR1ZURhdGUuaW5uZXJUZXh0ID0gZGF0ZTtcbiAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpO1xuICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QgPSAndG9kbyBwcmlvcml0eSc7XG4gICAgdGFza1ByaW9yaXR5LmlubmVyVGV4dCA9IHByaW9yaXR5O1xuICAgIGluZm9Db250LmFwcGVuZChkdWVEYXRlLCB0YXNrUHJpb3JpdHksIHRvZG9OYW1lKTtcblxuICAgIGNvbnN0IGVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBlZGl0LmlubmVyVGV4dCA9ICdFZGl0JztcbiAgICBlZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBlZGl0VGFza01vZGFsKG1vZGFsLCB0YXNrTmFtZSwgZGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5KVxuICAgIH0pXG4gICAgc2V0dGluZ3MuYXBwZW5kQ2hpbGQoZWRpdClcbiAgICBjcmVhdGVEZWxldGVCdG4oc2V0dGluZ3MsIGNvbnRhaW5lciwgdGFza05hbWUsIHByb2plY3QudG9Eb3MpO1xuICAgIGNvbnRhaW5lci5hcHBlbmQoaW5mb0NvbnQsIHNldHRpbmdzKVxuICAgIHBhcmVudC5hcHBlbmQoY29udGFpbmVyKTtcbn1cbmNvbnN0IGVkaXRUYXNrTW9kYWwgPSAobW9kYWwsIHRhc2tOYW1lLCBkYXRlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHkpID0+IHtcbiAgICBvcGVuTW9kYWwobW9kYWwpXG4gICAgICAgICAgICBlZGl0VGFzayA9IHRydWVcbiAgICAgICAgICAgIGN1cnJlbnRUYXNrID0gdGFza05hbWVcbiAgICAgICAgICAgIG5ld1Rhc2tOYW1lLnZhbHVlID0gdGFza05hbWVcbiAgICAgICAgICAgIG5ld1Rhc2tEYXRlLnZhbHVlID0gZGF0ZVxuICAgICAgICAgICAgbmV3VGFza0luZm8udmFsdWUgPSBkZXNjcmlwdGlvblxuICAgICAgICAgICAgc2VsZWN0UHJpb3JpdHkudmFsdWUgPSBwcmlvcml0eVxuICAgIH1cbmNvbnN0IG9wZW5Qcm9qID0gKHByb2pOYW1lLCBwcm9qZWN0TGlzdCwgaXRlbSkgPT4ge1xuICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvak5hbWU7XG4gICAgb3BlbmVkUHJvamVjdC5pbm5lclRleHQgPSBwcm9qTmFtZTtcbiAgICBjbGVhckRPTSh0b2RvTWFuYWdlbWVudClcbiAgICBjb25zdCBjbGlja2VkUHJvaiA9IGZpbmRPYmpJbkxpc3QocHJvamVjdExpc3QsIGN1cnJlbnRQcm9qZWN0KVxuICAgIGNsaWNrZWRQcm9qLnRvRG9zLmZvckVhY2godGFzayA9PiByZW5kZXJUYXNrKHRvZG9NYW5hZ2VtZW50LCB0YXNrLm5hbWUsIHRhc2suZHVlRGF0ZSwgdGFzay5wcmlvcml0eSwgdGFzay5kZXNjcmlwdGlvbiwgY2xpY2tlZFByb2opKVxuICAgIGNyZWF0ZUFkZFRvZG9CdG4oKVxufVxuY29uc3Qgb3Blbk1vZGFsID0gKG1vZGFsKSA9PiB7XG4gICAgaWYgKG1vZGFsID09PSBudWxsKSByZXR1cm5cbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbn1cblxuY29uc3QgY2xvc2VNb2RhbCA9IChtb2RhbCkgPT4ge1xuICAgIGlmIChtb2RhbCA9PT0gbnVsbCkgcmV0dXJuXG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbn1cblxuY29uc3QgUHJvamVjdCA9IGZ1bmN0aW9uKG5hbWUpIHsgXG4gICAgY29uc3QgdG9Eb3MgPSBbXVxuICAgIGNvbnN0IGFkZFRvZG8gPSAodG9kb1Rhc2spID0+IHtcbiAgICAgICAgdG9Eb3MucHVzaCh0b2RvVGFzaylcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlVG9kbyA9IGZ1bmN0aW9uKHRvZG9OYW1lKSB7XG4gICAgICAgIGNvbnN0IE9iakluZGV4ID0gdG9Eb3MuZmluZEluZGV4KG9iaiA9PiBvYmoubmFtZSA9PT0gdG9kb05hbWUpO1xuICAgICAgICBpZiAoT2JqSW5kZXggPCAwKSBjb25zb2xlLmxvZyhcIlByb2JsZW0gLSB0aGlzIGlzIHByb2plY3QgZG9lcyBub3QgZXhpc3QgaW4gdG9kbyBsaXN0XCIpO1xuICAgICAgICB0b0Rvcy5zcGxpY2UoT2JqSW5kZXgsIDEpXG4gICAgfSAgICBcbiAgICByZXR1cm4ge25hbWUsIGFkZFRvZG8sIHJlbW92ZVRvZG8sIHRvRG9zfVxufVxuXG5jb25zdCBhZGRUb0xpc3QgPSAobGlzdCwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IE9iakluZGV4ID0gbGlzdC5maW5kSW5kZXgob2JqID0+IG9iai5uYW1lID09PSBpdGVtLm5hbWUpO1xuICAgICAgICBpZiAoT2JqSW5kZXggPiAtMSkgcmV0dXJuIGNvbnNvbGUubG9nKFwiUHJvYmxlbSAtIHRoaXMgaXMgdGFzayBuYW1lIGFscmVhZHkgZXhpc3QuIHBsZWFzZSB0cnkgYWdhaW5cIik7XG4gICAgbGlzdC5wdXNoKGl0ZW0pXG59XG5jb25zdCByZW1vdmVGcm9tTGlzdCA9IChsaXN0LCBpdGVtKSA9PiB7XG4gICAgY29uc3QgT2JqSW5kZXggPSBsaXN0LmZpbmRJbmRleChvYmogPT4gb2JqLm5hbWUgPT09IGl0ZW0pO1xuICAgIGlmIChPYmpJbmRleCA8IDApIHJldHVybiBjb25zb2xlLmxvZyhcIlByb2JsZW0gLSB0aGlzIGlzIHByb2plY3QgZG9lcyBub3QgZXhpc3QgaW4gbGlzdFwiKTtcbiAgICBsaXN0LnNwbGljZShPYmpJbmRleCwgMSlcbn1cbmNvbnN0IGNsZWFyRE9NID0gKHBhcmVudCkgPT4ge1xuICAgIHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpXG4gICAgfVxufVxuY29uc3QgY3JlYXRlRGVsZXRlQnRuID0gZnVuY3Rpb24ocGFyZW50LCBub2RlSXRlbVRvUmVtb3ZlLCBuYW1lLCBsaXN0VG9SZW1vdmVGcm9tKSB7XG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdCA9ICdzZXR0aW5nIGRlbCdcbiAgICBkZWxldGVCdG4uaW5uZXJUZXh0ID0gXCJEZWxcIlxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcmVtb3ZlRnJvbUxpc3QobGlzdFRvUmVtb3ZlRnJvbSAsbmFtZSlcbiAgICAgICAgbm9kZUl0ZW1Ub1JlbW92ZS5yZW1vdmUoKVxuICAgICAgICBpZiAoY3VycmVudFByb2plY3QgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIHdoaWxlICh0b2RvTWFuYWdlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgdG9kb01hbmFnZW1lbnQucmVtb3ZlQ2hpbGQodG9kb01hbmFnZW1lbnQuZmlyc3RDaGlsZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wZW5lZFByb2plY3QuaW5uZXJUZXh0ID0gXCJDbGljayBvbiBwcm9qZWN0IHRvIHNlZSB0YXNrXCJcbiAgICAgICAgfVxuICAgIH0pXG4gICAgcGFyZW50LmFwcGVuZChkZWxldGVCdG4pO1xufVxuY29uc3QgY3JlYXRlUHJvamVjdERPTSA9IChwYXJlbnQsIHByb2plY3ROYW1lKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdCA9IFwiY29udGFpbmVyXCI7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzZXR0aW5ncy5jbGFzc0xpc3QgPSAnc2V0dGluZ3MnXG4gICAgY29uc3QgaXRlbU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpdGVtTmFtZS5jbGFzc0xpc3QgPSAnaXRlbU5hbWUnO1xuICAgIGl0ZW1OYW1lLmlubmVyVGV4dCA9IHByb2plY3ROYW1lO1xuICAgIGl0ZW1OYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBvcGVuUHJvaihwcm9qZWN0TmFtZSwgcHJvamVjdExpc3QpXG4gICAgfSlcbiAgICBuZXdQcm9qZWN0SW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIGNyZWF0ZURlbGV0ZUJ0bihzZXR0aW5ncywgY29udGFpbmVyLCBwcm9qZWN0TmFtZSwgcHJvamVjdExpc3QpO1xuICAgIGNvbnRhaW5lci5hcHBlbmQoaXRlbU5hbWUsIHNldHRpbmdzKVxuICAgIHBhcmVudC5hcHBlbmQoY29udGFpbmVyKTtcbn1cbmNvbnN0IGNyZWF0ZU5ld1Byb2plY3QgPSAocHJvak4pID0+IHtcbiAgICBpZiAocHJvamVjdExpc3Quc29tZShwcm9qID0+IHByb2oubmFtZSA9PT0gcHJvak4pKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIHByb2plY3QgbmFtZSBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIGNob29zZSBuZXcgbmFtZScpXG4gICAgICAgIHJldHVybiBcbiAgICB9XG4gICAgY29uc3QgbmV3UHJvaiA9IFByb2plY3QocHJvak4pXG4gICAgcHJvamVjdExpc3QucHVzaChuZXdQcm9qKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdG9yYWdlJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKVxuICAgIGNsZWFyRE9NKHByb2plY3RzKVxuICAgIHByb2plY3RMaXN0LmZvckVhY2gocHJvamVjdCA9PiBjcmVhdGVQcm9qZWN0RE9NKHByb2plY3RzLCBwcm9qZWN0Lm5hbWUpKVxufVxuY29uc3Qgc3VibWl0TmV3UHJvamVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY3JlYXRlTmV3UHJvamVjdChuZXdQcm9qZWN0SW5wdXQudmFsdWUpXG5cbn1cbmNvbnN0IGNyZWF0ZVRvZG9PYmogPSAobmFtZSwgZHVlRGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5KSA9PiB7XG4gICAgcmV0dXJuIHtuYW1lLCBkdWVEYXRlLCBwcmlvcml0eSwgZGVzY3JpcHRpb259XG59XG5jb25zdCBmaW5kT2JqSW5MaXN0ID0gKGxpc3QsIGl0ZW0pID0+IHtcbiAgICBjb25zdCBPYmpJbmRleCA9IGxpc3QuZmluZEluZGV4KG9iaiA9PiBvYmoubmFtZSA9PT0gaXRlbSk7XG4gICAgaWYgKE9iakluZGV4IDwgMCkgcmV0dXJuIGNvbnNvbGUubG9nKFwiUHJvYmxlbSAtIHRoaXMgaXMgcHJvamVjdCBkb2VzIG5vdCBleGlzdCBpblwiKVxuICAgIHJldHVybiBsaXN0W09iakluZGV4XVxufVxuY29uc3QgY3JlYXRlVGFzayA9IChuZXdUYXNrTmFtZSwgbmV3VGFza0RhdGUsIG5ld1Rhc2tJbmZvLCBjaG9zZW5Qcmlvcml0eSwgcHJvamVjdExpc3QsIGN1cnJlbnRQcm9qZWN0KSA9PntcbiAgICBjb25zdCBuZXdUb2RvID0gY3JlYXRlVG9kb09iaihuZXdUYXNrTmFtZSwgbmV3VGFza0RhdGUsIG5ld1Rhc2tJbmZvLCBjaG9zZW5Qcmlvcml0eSk7XG4gICAgY29uc3QgcHJvamVjdFRvQWRkVG8gPSBmaW5kT2JqSW5MaXN0KHByb2plY3RMaXN0LCBjdXJyZW50UHJvamVjdClcbiAgICBhZGRUb0xpc3QocHJvamVjdFRvQWRkVG8udG9Eb3MsIG5ld1RvZG8pXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0b3JhZ2UnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpXG4gICAgb3BlblByb2ooY3VycmVudFByb2plY3QsIHByb2plY3RMaXN0KVxuICAgIGNsb3NlTW9kYWwobW9kYWwpXG59XG5jb25zdCBjcmVhdGVOZXdUb2RvID0gZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZWRpdFRhc2spIHtcbiAgICAgICAgcmVtb3ZlRnJvbUxpc3QoZmluZE9iakluTGlzdChwcm9qZWN0TGlzdCwgY3VycmVudFByb2plY3QpLnRvRG9zLCBjdXJyZW50VGFzaylcbiAgICB9XG4gICAgY29uc3QgY2hvc2VuUHJpb3JpdHkgPSBzZWxlY3RQcmlvcml0eS5vcHRpb25zW3NlbGVjdFByaW9yaXR5LnNlbGVjdGVkSW5kZXhdO1xuICAgIGNyZWF0ZVRhc2sobmV3VGFza05hbWUudmFsdWUsIG5ld1Rhc2tEYXRlLnZhbHVlLCBuZXdUYXNrSW5mby52YWx1ZSwgY2hvc2VuUHJpb3JpdHkudmFsdWUsIHByb2plY3RMaXN0LCBjdXJyZW50UHJvamVjdClcbiAgICBlZGl0VGFzayA9IGZhbHNlXG59XG5wcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXROZXdQcm9qZWN0KVxudG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgY3JlYXRlTmV3VG9kbylcblxuaWYgKHByb2plY3RMaXN0KSB7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaChwcm9qZWN0ID0+IGNyZWF0ZVByb2plY3RET00ocHJvamVjdHMsIHByb2plY3QubmFtZSkpXG4gICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0TGlzdFswXVxufVxuZWxzZSBwcm9qZWN0cy5pbm5lclRleHQgPSBcIk5vIFByb2plY3RzIFlldFwiXG5cbmNyZWF0ZU5ld1Byb2plY3QoJ2NsZWFuIEhvdXNlJylcbmNyZWF0ZVRhc2soJ0Rpc2hlcycsICcyMDIyLTAxLTAxJywgJ01pc3RlciB3aWxsIGRvIGl0JywgJ0hpZ2gnLCBwcm9qZWN0TGlzdCwgcHJvamVjdExpc3RbMF0ubmFtZSlcbmNyZWF0ZVRhc2soJ2tha2EnLCAnMjAyMi0wMi0wMScsICdNaXN0ZXIgd2lsbCBOT1QgZG8gaXQnLCAnTG93JywgcHJvamVjdExpc3QsIHByb2plY3RMaXN0WzBdLm5hbWUpXG5jcmVhdGVOZXdQcm9qZWN0KCdQYWludCcpXG5jcmVhdGVUYXNrKCdjcmFja3MnLCAnMjAyMi0wOS0wMScsICdJIHdpbGwgZG8gaXQnLCAnSGlnaCcsIHByb2plY3RMaXN0LCBwcm9qZWN0TGlzdFsxXS5uYW1lKVxuY3JlYXRlVGFzaygnc2lkZSB3YWxsJywgJzIwMjItMDMtMDEnLCAnSSB3aWxsIERFRklOSVRFTFkgZG8gaXQnLCAnTG93JywgcHJvamVjdExpc3QsIHByb2plY3RMaXN0WzFdLm5hbWUpXG4iXSwibmFtZXMiOlsicHJvamVjdHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidG9kYXlEYXRlIiwib3BlbmVkUHJvamVjdCIsInByb2plY3RGb3JtIiwibmV3UHJvamVjdElucHV0IiwidG9kb01hbmFnZW1lbnQiLCJjbG9zZVRvZG9Nb2RhbCIsIm92ZXJsYXkiLCJtb2RhbCIsInRvZG9Gb3JtIiwibmV3VGFza05hbWUiLCJxdWVyeVNlbGVjdG9yIiwibmV3VGFza0RhdGUiLCJuZXdUYXNrSW5mbyIsInNlbGVjdFByaW9yaXR5IiwiY3VycmVudFByb2plY3QiLCJjdXJyZW50VGFzayIsInByb2plY3RMaXN0IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImVkaXRUYXNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlTW9kYWwiLCJpbm5lclRleHQiLCJEYXRlIiwidG9TdHJpbmciLCJzbGljZSIsIm9wZW5Qcm9qIiwicHJvak5hbWUiLCJpdGVtIiwiY2xlYXJET00iLCJjbGlja2VkUHJvaiIsImZpbmRPYmpJbkxpc3QiLCJ0b0RvcyIsImZvckVhY2giLCJ0YXNrIiwicGFyZW50IiwidGFza05hbWUiLCJkYXRlIiwicHJpb3JpdHkiLCJkZXNjcmlwdGlvbiIsInByb2plY3QiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiaW5mb0NvbnQiLCJhbGVydCIsInNldHRpbmdzIiwidG9kb05hbWUiLCJkdWVEYXRlIiwidGFza1ByaW9yaXR5IiwiYXBwZW5kIiwiZWRpdCIsIm9wZW5Nb2RhbCIsInZhbHVlIiwiZWRpdFRhc2tNb2RhbCIsImFwcGVuZENoaWxkIiwiY3JlYXRlRGVsZXRlQnRuIiwicmVuZGVyVGFzayIsIm5hbWUiLCJuZXdUb2RvQnRuIiwiaWQiLCJjcmVhdGVBZGRUb2RvQnRuIiwiYWRkIiwicmVzZXQiLCJyZW1vdmUiLCJyZW1vdmVGcm9tTGlzdCIsImxpc3QiLCJPYmpJbmRleCIsImZpbmRJbmRleCIsIm9iaiIsImNvbnNvbGUiLCJsb2ciLCJzcGxpY2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJub2RlSXRlbVRvUmVtb3ZlIiwibGlzdFRvUmVtb3ZlRnJvbSIsImRlbGV0ZUJ0biIsImNyZWF0ZVByb2plY3RET00iLCJwcm9qZWN0TmFtZSIsIml0ZW1OYW1lIiwiY3JlYXRlTmV3UHJvamVjdCIsInByb2pOIiwic29tZSIsInByb2oiLCJuZXdQcm9qIiwiYWRkVG9kbyIsInRvZG9UYXNrIiwicHVzaCIsInJlbW92ZVRvZG8iLCJQcm9qZWN0Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNyZWF0ZVRhc2siLCJjaG9zZW5Qcmlvcml0eSIsIm5ld1RvZG8iLCJhZGRUb0xpc3QiLCJlIiwicHJldmVudERlZmF1bHQiLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCJdLCJzb3VyY2VSb290IjoiIn0=